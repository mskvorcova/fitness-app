@startuml
title BPMN: Запись клиента на тренировку

|Client|
start
:Просмотр расписания;
:Выбор тренировки и даты;

|System|
:Проверка активного абонемента;

if (Абонемент активен?) then (да)
  :Проверка срока действия абонемента;
  if (Абонемент не истек?) then (да)
    :Проверка даты тренировки;
    if (Дата >= дата начала абонемента?) then (да)
      :Проверка свободных мест;
      if (Есть свободные места?) then (да)
        :Создание Booking;
        :Статус = BOOKED;
      else (нет)
        :Отказ: места заняты;
        stop
      endif
    else (нет)
      :Отказ: дата раньше начала абонемента;
      stop
    endif
  else (нет)
    :Отказ: абонемент истек;
    stop
  endif
else (нет)
  :Отказ в записи;
  stop
endif

stop
@enduml
